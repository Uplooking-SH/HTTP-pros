## HTTP协议##

http协议是基于TCP/IP协议的应用层协议，主要规定了客户端和服务器之间的通信格式，默认使用80端口。

最早版本1991年的0.9版本。

协议规定，只能回应HTML格式的字符串，不能回应别的格式。

服务器发送完毕，就关闭TCP连接



**HTTP/1.0**  1996年5月

任何格式的内容都可以发送，不仅限于字符串，还能传输图像、视频、二进制文件。

丰富了浏览器和服务器的互动手段。

新增的功能包括状态码，权限，缓存，内容编码等等。

 缺点：每个TCP连接只能发送一次请求，数据发送完毕，连接就关闭，如果还要请求其他资源，就必须再建立一个连接。

TCP连接的新建成本很高，需要三次握手，性能较差。



**HTTP/1.1**  1997年1月

进一步完善了HTTP，一直用到了20年后的今天。

1）引入了持久连接，采用了keep-alive的方式，保持连接，要求服务器不要关闭TCP连接，其他请求可以复用这个连接。

客户端和服务器发现对方一段时间没有活动，就可以主动关闭连接。目前情况下，对于同一个域名，大多数浏览器允许同时建立6个持久连接。

2）管道机制：在同一个TCP链接里面，客户端可以同时发送多个请求。

客户端需要请求两个资源，以前的做法是在同一个TCP连接里面，先发送A请求，等待服务器作出回应，收到后再发出B请求。管道机制则允许浏览器同时发出A和B请求，但是服务器还是按照顺序，先回应A请求，完成后再回应B请求。

3）缺点：队头堵塞，虽然允许TCP复用连接，但是服务器一次只能处理一个回应，导致请求依旧排队等着。

为了避免这个问题，两个方法

1.减少请求数

2.同时多开持久连接。



2009年SPDY   google开发的协议，用以解决以上问题，变成HTTP/2的基础。

**HTTP/2** 2015年发布

优势1.多路复用，也可以称为多工    在同一个TCP连接里面，同时收到了A请求和B请求，不用按照顺序一一回应。

​	2.优先级  http/2将每个请求回应的数据包称为数据流，每个数据流都有对应的一个优先级，优先级越高，服务器越早回应。

​	3.头信息压缩，HTTP协议不带有状态，每次请求都必须附上所有的信息，浪费带宽，影响速度。采用压缩后发送，减少传输时候占用的带宽。

​	4.服务器推送。HTTP/2允许服务器未经请求，主动向客户端发送资源。

​	场景：客户端收到网页后，解析HTML源码，发现有静态资源，再发出静态资源请求，其实服务器可以预期到客户端请求网页后，还会请求静态资源，所以就把这些资源随着网页一起发送给客户端了。

